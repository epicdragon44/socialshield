{"ast":null,"code":"var _jsxFileName = \"/home/danielwei/Development/GitProjects/maskweaver/src/components/Landing/index.js\";\nimport React from 'react';\nimport { withAuthorization } from '../Session';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nclass Landing extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.getFriends = this.getFriends.bind(this);\n    this.addCourse = this.addCourse.bind(this); // this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  } // handleSubmit(event) { \n  //     event.preventDefault();\n  // }\n\n\n  addCourse(nameOfCourse) {\n    //Writes correctly, albeit infinitely\n    console.log('hi');\n    const usr = JSON.parse(localStorage.getItem('authUser'));\n    var newCourses = Object.values(usr).slice()[2];\n    newCourses.push(nameOfCourse);\n    this.setState({\n      arrCourses: newCourses.slice()\n    }); // console.log(Object.values(usr).slice()[2]);\n\n    localStorage.setItem('authUser', JSON.stringify(usr)); // console.log(Object.values(usr).slice()[2]);\n\n    this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n      friends: newCourses.slice()\n    });\n  }\n\n  getFriends() {\n    //to help, use something similar to lines 48-49 to get current user username/uid or whatever\n    //in the output, each object should contain a name, which corresponds to a string, and a pointCount, which corresponds to an int\n    //{ name: \"Bob\", pointCount: 15 }\n    //the return statement below is just dummy code. pls remove\n    const usr = JSON.parse(localStorage.getItem('authUser'));\n    const usrList = Object.values(usr).slice()[2];\n    const arrFriends = [];\n\n    for (var i = 0; i < usrList.length; i++) {\n      arrFriends.push({\n        name: \"\",\n        pointCount: 0\n      });\n    }\n\n    const allUsers = JSON.parse(localStorage.getItem('users'));\n\n    for (var i = 1; i < usrList.length; i++) {\n      for (var j = 0; j < allUsers.length; j++) {\n        if (usrList[i] == null) {} else {\n          const curFriend = usrList[i];\n          const curUser = allUsers[j];\n\n          if (curUser.uid === curFriend) {\n            const friendUSer = Object.values(curUser.username);\n            const friendPts = Object.values(curUser.points);\n            console.log(friendPts);\n            console.log(friendUSer);\n            arrFriends[i].name = friendUSer.join(\"\");\n            arrFriends[i].pointCount = curUser.points;\n          }\n        }\n      }\n    }\n\n    console.log(arrFriends);\n    return arrFriends; // TODO: filter entries with name as \"\" (empty string)\n  }\n\n  render() {\n    const usr = JSON.parse(localStorage.getItem('authUser')); // user's personal data is stored in 'authUser'\n\n    var username = Object.values(usr).slice()[6];\n    var betterList = [];\n\n    for (let i = 0; i < this.getFriends().slice().length; i++) {\n      if (!(this.getFriends().slice()[i].name === \"\")) {\n        betterList.push(this.getFriends().slice()[i]);\n      }\n    }\n\n    var msg = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 20\n      }\n    });\n\n    if (this.getFriends().slice().length === 1) {\n      msg = /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 20\n        }\n      }, \"You don't have any friends yet.\");\n    } else if (betterList.length === 0) {\n      msg = /*#__PURE__*/React.createElement(\"center\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 28\n        }\n      }, \"You don't have any friends yet.\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CopyToClipboard, {\n      text: \"\",\n      onCopy: () => window.location.reload(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 28\n      }\n    }), \"(Refresh \\u21BA)\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"colorheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, \"Friends\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"colorheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"Add a Friend\")), /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NameForm, {\n      addCourse: this.addCourse,\n      firebase: this.props.firebase,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"colorheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, \"Friend Activity\")), msg, this.getFriends().slice().map(friend => /*#__PURE__*/React.createElement(Friend, {\n      name: friend.name,\n      pointCount: friend.pointCount,\n      currentUser: username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    this.props.addCourse(this.state.value);\n    event.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, \"Enter Friend ID below:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"nicesubmit\",\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nfunction Friend(props) {\n  const usr = JSON.parse(localStorage.getItem('authUser')); // user's personal data is stored in 'authUser'\n\n  if (props.name === \"\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    });\n  }\n\n  var msg = \"\";\n  var diff = 0;\n  var attribute = \"friend\";\n  var myPts = Object.values(usr).slice()[4];\n\n  if (myPts > props.pointCount) {\n    diff = myPts - props.pointCount;\n    attribute += \"green\";\n    msg = /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, \"Congrats!\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 22\n      }\n    }), \" You have \", diff, \" more points!\");\n  } else if (myPts < props.pointCount) {\n    diff = props.pointCount - myPts;\n    attribute += \"red\";\n    msg = /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, \"You're behind!\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 27\n      }\n    }), \" Your friend has \", diff, \" more points!\");\n  } else {\n    msg = /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, \"You're tied for \", myPts, \" points!\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 48\n      }\n    }), \" See if you can pull ahead!\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: attribute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"colorheadernospace\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, props.name), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, props.pointCount, \" points\"), msg));\n}\n\nconst condition = authUser => !!authUser;\n\nexport default withAuthorization(condition)(Landing);","map":{"version":3,"sources":["/home/danielwei/Development/GitProjects/maskweaver/src/components/Landing/index.js"],"names":["React","withAuthorization","CopyToClipboard","Landing","Component","constructor","props","state","value","handleChange","bind","getFriends","addCourse","event","setState","target","nameOfCourse","console","log","usr","JSON","parse","localStorage","getItem","newCourses","Object","values","slice","push","arrCourses","setItem","stringify","firebase","users","child","update","friends","usrList","arrFriends","i","length","name","pointCount","allUsers","j","curFriend","curUser","uid","friendUSer","username","friendPts","points","join","render","betterList","msg","window","location","reload","map","friend","NameForm","handleSubmit","preventDefault","Friend","diff","attribute","myPts","condition","authUser"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { withAuthorization } from '../Session';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\n\nclass Landing extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: '',\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.getFriends = this.getFriends.bind(this);\n        this.addCourse = this.addCourse.bind(this);\n        // this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(event) {    this.setState({value: event.target.value});  }\n\n    // handleSubmit(event) { \n        \n    //     event.preventDefault();\n    // }\n\n    addCourse(nameOfCourse) { //Writes correctly, albeit infinitely\n        console.log('hi');\n\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        var newCourses = Object.values(usr).slice()[2];\n        newCourses.push(nameOfCourse);\n\n        this.setState({\n            arrCourses: newCourses.slice(),\n        });\n\n        // console.log(Object.values(usr).slice()[2]);\n        localStorage.setItem('authUser', JSON.stringify(usr));\n        // console.log(Object.values(usr).slice()[2]);\n        this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n            friends: newCourses.slice(),\n        });\n    }\n\n    getFriends() { \n\n        //to help, use something similar to lines 48-49 to get current user username/uid or whatever\n        //in the output, each object should contain a name, which corresponds to a string, and a pointCount, which corresponds to an int\n        //{ name: \"Bob\", pointCount: 15 }\n        //the return statement below is just dummy code. pls remove\n\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        const usrList = Object.values(usr).slice()[2];\n        const arrFriends = [];\n        for (var i = 0; i < usrList.length; i++) {\n            arrFriends.push({\n                name: \"\",\n                pointCount: 0\n            });\n        }\n        const allUsers = JSON.parse(localStorage.getItem('users'));\n        for ( var i = 1; i < usrList.length; i++) {\n            for ( var j = 0; j < allUsers.length; j++) {\n                if (usrList[i] == null) {}\n\n                else {\n                    const curFriend = usrList[i];\n                    const curUser = allUsers[j];\n                    if ( curUser.uid === curFriend) {\n                        const friendUSer = Object.values(curUser.username);\n                        const friendPts = Object.values(curUser.points);\n                        console.log(friendPts);\n                        console.log(friendUSer);\n                        arrFriends[i].name = friendUSer.join(\"\");\n                        arrFriends[i].pointCount = curUser.points;\n                    }\n                }\n\n            }\n        }\n        console.log(arrFriends);\n        return arrFriends; // TODO: filter entries with name as \"\" (empty string)\n    }\n\n    render() {\n        const usr = JSON.parse(localStorage.getItem('authUser')); // user's personal data is stored in 'authUser'\n        var username = Object.values(usr).slice()[6];\n        \n        var betterList = [];\n        for (let i = 0; i<this.getFriends().slice().length; i++) {\n            if (!(this.getFriends().slice()[i].name===\"\")) {\n                betterList.push(this.getFriends().slice()[i]);\n            }\n        }\n        var msg = (<div />);\n        if (this.getFriends().slice().length===1) {\n            msg = (<p>You don't have any friends yet.</p>);\n        }\n        else if (betterList.length===0) {\n            msg = (<center><p>You don't have any friends yet.</p></center>);\n        }\n        \n        return (\n            <div>\n                <CopyToClipboard text={\"\"} onCopy={() => window.location.reload()}>\n                    <center>\n                        <p><br />(Refresh &#8634;)</p>\n                    </center>\n                </CopyToClipboard>\n                <div className=\"colorheader\">\n                    <h1>Friends</h1>\n                </div>\n                <hr />\n                <div className=\"colorheader\">\n                    <h2>Add a Friend</h2>\n                </div>\n                <center>\n                    {/* <form onSubmit={this.handleSubmit}>\n                        <label>\n                            Enter the Friend's ID:<br />\n                            <input type=\"text\" value={this.state.value} onChange={this.handleChange} />\n                        </label>\n                        <br />\n                        <input className = \"nicesubmit\" type=\"submit\" value=\"Submit\" />\n                    </form> */}\n                    <NameForm addCourse={this.addCourse} firebase = {this.props.firebase}/>\n                </center>\n                <hr />\n                <div className=\"colorheader\">\n                    <h2>Friend Activity</h2>\n                </div>\n                {msg}\n                {this.getFriends().slice().map(\n                    friend =>\n                    <Friend \n                        name={friend.name}\n                        pointCount={friend.pointCount}\n                        currentUser={username}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nclass NameForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {value: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(event) {    this.setState({value: event.target.value});  }\n\n    handleSubmit(event) { \n        this.props.addCourse(this.state.value);\n        event.preventDefault();\n    }\n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}>\n                <label>\n                    Enter Friend ID below:<br /><br />\n                    <input type=\"text\" value={this.state.value} onChange={this.handleChange} />\n                </label>\n                <br /><br />\n                <input className = \"nicesubmit\" type=\"submit\" value=\"Submit\" />\n            </form>\n        );\n    }\n}\n\nfunction Friend(props) {\n    const usr = JSON.parse(localStorage.getItem('authUser')); // user's personal data is stored in 'authUser'\n\n    if (props.name===\"\") {\n        return (<div />);\n    }\n\n    var msg = \"\";\n    var diff = 0;\n    var attribute = \"friend\";\n    var myPts = Object.values(usr).slice()[4];\n    if (myPts > props.pointCount) {\n        diff = myPts - props.pointCount;\n        attribute+=\"green\";\n        msg = (\n        <h4>Congrats!<br /> You have {diff} more points!</h4>\n        );\n    }\n    else if (myPts < props.pointCount) {\n        diff = props.pointCount - myPts;\n        attribute+=\"red\";\n        msg = (\n        <h4>You're behind!<br /> Your friend has {diff} more points!</h4>\n        );\n    }\n    else {\n        msg = (\n            <h4>You're tied for {myPts} points!<br /> See if you can pull ahead!</h4>\n        );\n    }\n\n    return (\n        <div className={attribute}>\n            <div className=\"colorheadernospace\">\n                <h2>{props.name}</h2>\n                <h3>{props.pointCount} points</h3>\n                {msg}\n            </div>\n        </div>\n    );\n}\n\nconst condition = authUser => !!authUser;\n\nexport default withAuthorization(condition)(Landing);"]},"metadata":{},"sourceType":"module"}